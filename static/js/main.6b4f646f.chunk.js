(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,a){e.exports=a(46)},34:function(e,t,a){},40:function(e,t,a){},42:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(25),s=a.n(c),i=(a(34),a(14)),o=a(15),l=a(19),h=a(16),u=a(18),p=a(6),d=a(11),f=(a(40),a(42),"REFRESH_CHARTS"),m="REFRESH_CHARTS_OF_TYPE",y="DISPATCH_ACTION_AND_REFRESH",b=function(e,t){return{type:"SET_DATE",payload:{id:e,date:t}}},E=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.chart;return r.a.createElement("div",{className:"chart"},r.a.createElement("div",{className:"field"},"ID"),r.a.createElement("div",{className:"value"},t.id),r.a.createElement("div",{className:"field"},"Name"),r.a.createElement("div",{className:"value"},r.a.createElement("input",{type:"text",onChange:function(a){return e.props.setName(t.id,a.target.value)},value:t.name})),r.a.createElement("div",{className:"field"},"Type"),r.a.createElement("div",{className:"value"},r.a.createElement("input",{type:"text",onChange:function(a){return e.props.setType(t.id,a.target.value)},value:t.type})),r.a.createElement("div",{className:"field"},"Date"),r.a.createElement("div",{className:"value"},r.a.createElement("input",{type:"text",onChange:function(a){return e.props.setDate(t.id,a.target.value)},value:t.date})))}}]),t}(n.PureComponent),O=Object(d.b)(null,{setName:function(e,t){return{type:"SET_NAME",payload:{id:e,name:t}}},setType:function(e,t){return{type:"SET_TYPE",payload:{id:e,type:t}}},setDate:b})(E),v=a(27),j=Object(v.a)([function(e){return e.charts}],function(e){return Object.values(e).sort(function(e,t){return e-t})}),T=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).createChart=a.createChart.bind(Object(p.a)(Object(p.a)(a))),a.refreshCharts=a.refreshCharts.bind(Object(p.a)(Object(p.a)(a))),a.refreshTypeACharts=a.refreshTypeACharts.bind(Object(p.a)(Object(p.a)(a))),a.refreshStaleCharts=a.refreshStaleCharts.bind(Object(p.a)(Object(p.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"createChart",value:function(){this.props.createChart()}},{key:"refreshCharts",value:function(){this.props.refreshCharts()}},{key:"refreshTypeACharts",value:function(){this.props.refreshChartsOfType("Type A")}},{key:"refreshStaleCharts",value:function(){this.props.dispatchActionAndRefresh({type:"JUNK_ACTION",payload:{name:"junk",type:"useless"}},function(e){return Date.now()-e.date>15e3})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("ul",{className:"controls"},r.a.createElement("li",null,r.a.createElement("button",{onClick:this.createChart},"Add chart")),r.a.createElement("li",null,r.a.createElement("button",{onClick:this.refreshCharts},"Refresh charts")),r.a.createElement("li",null,r.a.createElement("button",{onClick:this.refreshTypeACharts},"Refresh Type A charts")),r.a.createElement("li",null,r.a.createElement("button",{onClick:this.refreshStaleCharts},"Refresh charts that are 15 seconds old"))),r.a.createElement("ul",{className:"notes"},r.a.createElement("li",null,"Okay. Start off by just clicking the 'Add chart' button a few times. That'll add some dummy \"chart\" widgets, which are just boxes that have a few values. You can change them."),r.a.createElement("li",null,"The simplest case is just the 'Refresh charts' button. Click that, and everything refreshes."),r.a.createElement("li",null,"Next simplest case would be the 'Refresh Type A charts' button. Click that, and only charts of Type A will refresh. Note that chart types are randomly assigned upon creation, and you can edit the type of you don't have an \"Type A\" charts."),r.a.createElement("li",null,"The complex case is refreshing 15 second old charts. That one dispatches a different type of action that fires off some arbitrary action (not specifically a REFRESH_CHART* type), and also takes a condition function that operates on each chart in the list and refreshes it if it matches the condition. In this case, if it's more than 15 seconds old."),r.a.createElement("li",null,"Since this is react, there's a ton of boilerplate and irrelevant stuff set up just to make the demo happen. You can really just look at src/sagas/charts.js to see the saga implementation with notes on it. The rest is not documented and not written to OmniSci style guidelines.")),r.a.createElement("div",{className:"charts"},this.props.charts.map(function(e){return r.a.createElement(O,{key:e.id,chart:e})})))}}]),t}(n.Component);T.defaultProps={charts:[]};var C=Object(d.b)(function(e){return{charts:j(e)}},{createChart:function(){return{type:"CREATE_CHART"}},refreshCharts:function(){return{type:f}},refreshChartsOfType:function(e){return{type:m,payload:{chartType:e}}},dispatchActionAndRefresh:function(e,t){return{type:y,payload:{action:e,condition:t}}}})(T);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=a(7),k=a(28),A=a(17),N=a(8),_={},x=0,g=["Type A","Type B","Type C","Type D","Type E","Type F"],R=Object(w.c)({charts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_CHART":var a=x++;return Object(N.a)({},e,Object(A.a)({},a,{id:a,name:"New chart",type:g[Math.floor(Math.random()*g.length)],date:Date.now()}));case"DELETE_CHART":var n=t.payload.id,r=Object(N.a)({},e);return delete r[n],r;case"SET_DATE":var c=t.payload,s=c.id,i=c.date,o=Object(N.a)({},e);return o[s]=Object(N.a)({},o[s],{date:i}),o;case"SET_TYPE":var l=t.payload,h=l.id,u=l.type,p=Object(N.a)({},e);return p[h]=Object(N.a)({},p[h],{type:u}),p;case"SET_NAME":var d=t.payload,f=d.id,m=d.name,y=Object(N.a)({},e);return y[f]=Object(N.a)({},y[f],{name:m}),y;case"JUNK_ACTION":return console.log("A junk action was run. Nothing happens."),e;default:return e}}}),S=a(5),D=a.n(S),H=a(4),I=D.a.mark(J),F=D.a.mark(M),P=D.a.mark(U),Y=D.a.mark(X);function J(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.a)([Object(H.d)(f,M),Object(H.d)(m,U),Object(H.d)(y,X)]);case 2:case"end":return e.stop()}},I,this)}function M(e){var t,a,n,r,c,s;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.c)();case 2:t=e.sent,a=t.charts,n=Object.keys(a),r=0;case 6:if(!(r<n.length)){e.next=14;break}return c=n[r],s=a[c],e.next=11,Object(H.b)(b(s.id,Date.now()));case 11:r++,e.next=6;break;case 14:case"end":return e.stop()}},F,this)}function U(e){var t,a,n,r,c,s,i;return D.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.chartType,o.next=3,Object(H.c)();case 3:a=o.sent,n=a.charts,r=Object.keys(n),c=0;case 7:if(!(c<r.length)){o.next=16;break}if(s=r[c],(i=n[s]).type!==t){o.next=13;break}return o.next=13,Object(H.b)(b(i.id,Date.now()));case 13:c++,o.next=7;break;case 16:case"end":return o.stop()}},P,this)}function X(e){var t,a,n,r,c,s,i,o,l;return D.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,a=t.action,n=t.condition,h.next=3,Object(H.b)(a);case 3:return h.next=5,Object(H.c)();case 5:r=h.sent,c=r.charts,s=Object.keys(c),i=0;case 9:if(!(i<s.length)){h.next=18;break}if(o=s[i],l=c[o],!n(l)){h.next=15;break}return h.next=15,Object(H.b)(b(l.id,Date.now()));case 15:i++,h.next=9;break;case 18:case"end":return h.stop()}},Y,this)}var B=D.a.mark(L);function L(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.a)([J()]);case 2:case"end":return e.stop()}},B,this)}a.d(t,"store",function(){return V});var K=Object(k.a)(),V=Object(w.a)(K)(w.e)(R,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());K.run(L),s.a.render(r.a.createElement(d.a,{store:V},r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,2,1]]]);
//# sourceMappingURL=main.6b4f646f.chunk.js.map