{"version":3,"sources":["constants/types.js","actions/chart.js","components/Chart/index.js","selectors/charts.js","components/App/index.js","serviceWorker.js","reducers/charts.js","reducers/index.js","sagas/charts.js","sagas/index.js","index.js"],"names":["REFRESH_CHARTS","REFRESH_CHARTS_OF_TYPE","DISPATCH_ACTION_AND_REFRESH","setDate","id","date","type","payload","Chart","_this","this","chart","props","react_default","a","createElement","className","onChange","e","setName","target","value","name","setType","PureComponent","connect","getSortedCharts","createSelector","state","charts","Object","values","sort","b","App","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","createChart","bind","assertThisInitialized","refreshCharts","refreshTypeACharts","refreshStaleCharts","refreshChartsOfType","dispatchActionAndRefresh","Date","now","onClick","map","components_Chart","key","Component","defaultProps","chartType","action","condition","Boolean","window","location","hostname","match","INITIAL","nextChartID","chartTypes","combineReducers","arguments","length","undefined","objectSpread","defineProperty","Math","floor","random","newState","_action$payload","_action$payload2","_action$payload3","console","log","chartsSaga","refreshAllCharts","regenerator_default","wrap","_context","prev","next","all","takeEvery","stop","_marked","_arr","_i","chart_id","_context2","select","sent","keys","put","_marked2","_arr2","_i2","_context3","_marked3","wrappedAction","_wrappedAction$payloa","_arr3","_i3","_context4","_marked4","rootSaga","sagas_marked","__webpack_require__","d","__webpack_exports__","store","sagaMiddleware","createSagaMiddleware","applyMiddleware","createStore","createStoreWithMiddleware","reducers","__REDUX_DEVTOOLS_EXTENSION__","run","ReactDOM","render","es","components_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.6b4f646f.chunk.js","sourcesContent":["export const CREATE_CHART                 = 'CREATE_CHART';\nexport const DELETE_CHART                 = 'DELETE_CHART';\n\nexport const REFRESH_CHARTS               = 'REFRESH_CHARTS';\nexport const REFRESH_CHARTS_OF_TYPE       = 'REFRESH_CHARTS_OF_TYPE';\n\nexport const DISPATCH_ACTION_AND_REFRESH  = 'DISPATCH_ACTION_AND_REFRESH';\n\nexport const SET_DATE                     = 'SET_DATE';\nexport const SET_TYPE                     = 'SET_TYPE';\nexport const SET_NAME                     = 'SET_NAME';\n\nexport const JUNK_ACTION                  = 'JUNK_ACTION';\n","import {\n  CREATE_CHART,\n  DELETE_CHART,\n\n  REFRESH_CHARTS,\n  REFRESH_CHARTS_OF_TYPE,\n\n  DISPATCH_ACTION_AND_REFRESH,\n\n  SET_DATE,\n  SET_TYPE,\n  SET_NAME,\n\n  JUNK_ACTION,\n} from '../constants/types';\n\nexport const createChart = () => {\n  return {\n    type : CREATE_CHART\n  }\n};\n\nexport const deleteChart = () => {\n  return {\n    type : DELETE_CHART\n  }\n};\n\nexport const refreshCharts = () => {\n  return {\n    type : REFRESH_CHARTS\n  }\n};\n\nexport const refreshChartsOfType = (chartType) => {\n  return {\n    type    : REFRESH_CHARTS_OF_TYPE,\n    payload : { chartType }\n  }\n};\n\nexport const dispatchActionAndRefresh = (action, condition) => {\n  return {\n    type    : DISPATCH_ACTION_AND_REFRESH,\n    payload : { action, condition }\n  }\n}\n\nexport const setDate = (id, date) => {\n  return {\n    type    : SET_DATE,\n    payload : {id, date}\n  }\n};\n\nexport const setType = (id, type) => {\n  return {\n    type    : SET_TYPE,\n    payload : {id, type}\n  }\n};\n\nexport const setName = (id, name) => {\n  return {\n    type    : SET_NAME,\n    payload : {id, name}\n  }\n};\n\nexport const junkAction = (name, type) => {\n  return {\n    type : JUNK_ACTION,\n    payload : { name, type }\n  }\n};\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport './Chart.css';\n\nimport { setName, setType, setDate } from '../../actions';\n\nclass Chart extends PureComponent {\n\n  render() {\n\n    const chart = this.props.chart;\n\n    return (\n      <div className='chart'>\n        <div className='field'>ID</div>\n        <div className='value'>{chart.id}</div>\n\n        <div className='field'>Name</div>\n        <div className='value'>\n          <input\n            type = 'text'\n            onChange={ e => this.props.setName(chart.id, e.target.value) }\n            value={chart.name} />\n        </div>\n\n        <div className='field'>Type</div>\n        <div className='value'>\n          <input\n            type = 'text'\n            onChange={ e => this.props.setType(chart.id, e.target.value) }\n            value={chart.type} />\n        </div>\n\n        <div className='field'>Date</div>\n        <div className='value'>\n          <input\n            type = 'text'\n            onChange={ e => this.props.setDate(chart.id, e.target.value) }\n            value={chart.date} />\n        </div>\n      </div>\n    )\n  }\n}\n\n\nexport default connect( null, { setName, setType, setDate } )( Chart );\n","import { createSelector } from 'reselect';\n\nexport const getCharts = state => state.charts;\n\nexport const getSortedCharts = createSelector(\n  [getCharts],\n  (charts) => {\n    return Object.values(charts).sort( (a,b) => a - b )\n  }\n)\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport './App.css';\n\nimport Chart from '../Chart';\n\nimport { createChart, refreshCharts, refreshChartsOfType, dispatchActionAndRefresh, junkAction } from '../../actions';\nimport { getSortedCharts } from '../../selectors';\n\nclass App extends Component {\n\n  static defaultProps = {\n    charts : []\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.createChart        = this.createChart.bind(this);\n    this.refreshCharts      = this.refreshCharts.bind(this);\n    this.refreshTypeACharts = this.refreshTypeACharts.bind(this);\n    this.refreshStaleCharts = this.refreshStaleCharts.bind(this);\n  }\n\n  createChart() {\n    this.props.createChart();\n  }\n\n  refreshCharts() {\n    this.props.refreshCharts();\n  }\n\n  refreshTypeACharts() {\n    this.props.refreshChartsOfType('Type A');\n  }\n\n  refreshStaleCharts() {\n    this.props.dispatchActionAndRefresh(\n      junkAction('junk', 'useless'),\n      (chart) => { return Date.now() - chart.date > 15 * 1000 }\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <ul className='controls'>\n          <li><button onClick = { this.createChart } >Add chart</button></li>\n          <li><button onClick = { this.refreshCharts } >Refresh charts</button></li>\n          <li><button onClick = { this.refreshTypeACharts } >Refresh Type A charts</button></li>\n          <li><button onClick = { this.refreshStaleCharts } >Refresh charts that are 15 seconds old</button></li>\n        </ul>\n        <ul className='notes'>\n          <li>Okay. Start off by just clicking the 'Add chart' button a few times. That'll add some dummy \"chart\" widgets, which are\n          just boxes that have a few values. You can change them.\n          </li>\n          <li>The simplest case is just the 'Refresh charts' button. Click that, and everything refreshes.</li>\n          <li>Next simplest case would be the 'Refresh Type A charts' button. Click that, and only charts of Type A will refresh. Note\n          that chart types are randomly assigned upon creation, and you can edit the type of you don't have an \"Type A\" charts.</li>\n          <li>The complex case is refreshing 15 second old charts. That one dispatches a different type of action that fires off some\n          arbitrary action (not specifically a REFRESH_CHART* type), and also takes a condition function that operates on each chart in the list\n          and refreshes it if it matches the condition. In this case, if it's more than 15 seconds old.</li>\n          <li>Since this is react, there's a ton of boilerplate and irrelevant stuff set up just to make the demo happen. You can really\n          just look at src/sagas/charts.js to see the saga implementation with notes on it. The rest is not documented and not written to OmniSci\n          style guidelines.</li>\n        </ul>\n        <div className='charts'>\n          { this.props.charts.map( chart => <Chart key={chart.id} chart={chart} /> ) }\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    charts : getSortedCharts(state)\n  }\n}\n\nexport default connect( mapStateToProps, { createChart, refreshCharts, refreshChartsOfType, dispatchActionAndRefresh } )( App );\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {\n  CREATE_CHART,\n  DELETE_CHART,\n\n  SET_DATE,\n  SET_TYPE,\n  SET_NAME,\n\n  JUNK_ACTION\n} from '../constants/types';\n\nconst INITIAL = {};\n\nlet nextChartID = 0;\n\nconst chartTypes = ['Type A', 'Type B', 'Type C', 'Type D', 'Type E', 'Type F'];\n\nexport default (state = INITIAL, action) => {\n  switch(action.type) {\n    case CREATE_CHART : {\n      const id = nextChartID++;\n      return {\n        ...state,\n        [id] : {\n          id,\n          name : 'New chart',\n          type : chartTypes[ Math.floor(Math.random() * chartTypes.length) ],\n          date : Date.now(),\n        }\n      }\n    }\n    case DELETE_CHART : {\n      const {id} = action.payload;\n      const newState = {...state};\n      delete newState[id];\n      return newState;\n    }\n    case SET_DATE : {\n      const { id, date } = action.payload;\n      const newState   = { ...state };\n      newState[id]     = { ...newState[id], date };\n      return newState;\n    }\n    case SET_TYPE : {\n      const { id, type } = action.payload;\n      const newState   = { ...state };\n      newState[id]     = { ...newState[id], type };\n      return newState;\n    }\n    case SET_NAME : {\n      const { id, name } = action.payload;\n      const newState   = { ...state };\n      newState[id]     = { ...newState[id], name };\n      return newState;\n    }\n    case JUNK_ACTION : {\n      console.log(\"A junk action was run. Nothing happens.\");\n      return state;\n    }\n    default :\n      return state;\n  }\n};\n","import { combineReducers } from 'redux';\n\nimport charts from './charts';\n\nexport default combineReducers({\n  charts,\n});\n","import { all, put, takeEvery, select } from 'redux-saga/effects';\n\nimport {\n  REFRESH_CHARTS,\n  REFRESH_CHARTS_OF_TYPE,\n  DISPATCH_ACTION_AND_REFRESH,\n} from '../constants/types';\n\nimport {\n  setDate,\n} from '../actions';\n\n/*\n  Okay, so here's where I'll try to explain my though process. First of all, the\n  action being \"REFRESH_CHARTS\" is arbitrary. Any action that'd cause all the charts\n  to refresh could go in here and call the refreshAllCharts function to call them all.\n\n  Note that for demo purposes \"refreshing\" a chart just consists of setting its date to\n  NOW, whereas in actuality we'd want to do something more complicated.\n*/\n\nexport default function* chartsSaga() {\n  yield all([\n    takeEvery( REFRESH_CHARTS,              refreshAllCharts ),\n    takeEvery( REFRESH_CHARTS_OF_TYPE,      refreshChartsOfType ),\n    takeEvery( DISPATCH_ACTION_AND_REFRESH, dispatchActionAndRefresh )\n  ])\n}\n\n/* This function should hand most cases. I'd make an argument that if \"something\" happens\nthat should cause a refresh, we can just blast it out to all charts on the page, unless we\nhave a performance reason to limit it. Maybe we do? I dunno.\n\nBut as a starting point, I'd rather skew towards the less involved flavor.\n\n*/\n\nfunction* refreshAllCharts(action) {\n  const state = yield select();\n  const charts = state.charts;\n\n  for (const chart_id of Object.keys(charts)) {\n    const chart = charts[chart_id];\n    yield put( setDate( chart.id, Date.now() ) )\n  }\n}\n\n/* this one is barely slightly more complicated, and just arbitrarily. In this case,\nthe action takes a single value in its payload (\"chartType\" here, because of course a\nstandard redux action already has a \"type\" and I didn't want the two to get confused\nand we can't have nice things), and then behaves the same way except that it checks\nto see if the type matches whatever we're refreshing.\n\nNaturally \"type\" is arbitrary, and we could have different functions to refresh based on\ndifferent parameters. But if we're doing this for more than 1 or 2 fields, we'd probably\nwant to use a more generic approach.\n\n*/\n\nfunction* refreshChartsOfType(action) {\n  const { chartType } = action.payload;\n  const state = yield select();\n  const charts = state.charts;\n\n  for (const chart_id of Object.keys(charts)) {\n    const chart = charts[chart_id];\n    if ( chart.type === chartType ) {\n      yield put( setDate( chart.id, Date.now() ) )\n    }\n  }\n}\n\n/* This is a very generic approach, and functionally very similar to the existing code.\n\nTo use this one, you'd dispatch an action of type DISPATCH_ACTION_AND_REFRESH, which\nhas an action and a condition in its payload. Yes, having an action have a payload with an\naction is confusing, I agree. Same issue as up above. Anyway, this saga will just immediately\ndispatch whatever action it was handed, and then iterate through the charts and check to see\nif they match the condition. If so, we refresh, and if not we skip it.\n\nOf course, we could also write a helper function to wrapper the original action creator so its\ninterface is unchanged. Maybe something like this, which I just dashed off and did not test:\n\nfunction makeRefreshableAction( actionCreator, condition = () => true ) {\n  return (...args) {\n    dispatchActionAndRefresh(\n      actionCreator(args),\n      condition\n    )\n  }\n}\n\nand then:\n\nconst refreshableActionCreator = makeRefreshableAction(actionCreator, condition);\n\nto get a drop in replacement for actionCreator. Assuming I dashed off the function properly, of course. :-)\n\nHonestly? I don't like this approach. It feels overly generic without a strong immediate need. On the other hand,\nit's very future proofed. It's also virtually the same as what we've already got. But hey, it's in a saga, so it's\na smidgen different.\n*/\n\nfunction* dispatchActionAndRefresh(wrappedAction) {\n  const { action, condition } = wrappedAction.payload;\n  yield put(action);\n  const state = yield select();\n  const charts = state.charts;\n\n  for (const chart_id of Object.keys(charts)) {\n    const chart = charts[chart_id];\n    if ( condition(chart) ) {\n      yield put( setDate( chart.id, Date.now() ) )\n    }\n  }\n}\n","import { all } from 'redux-saga/effects';\n\nimport chartsSaga from './charts';\n\nexport default function* rootSaga() {\n  yield all([\n    chartsSaga(),\n  ])\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nimport {Provider} from 'react-redux';\nimport {createStore, applyMiddleware} from 'redux';\nimport createSagaMiddleware from 'redux-saga';\n\nimport reducers from './reducers';\nimport rootSaga from './sagas';\n\nconst sagaMiddleware = createSagaMiddleware();\n\nconst createStoreWithMiddleware = applyMiddleware(sagaMiddleware)(createStore);\n\nexport const store = createStoreWithMiddleware(reducers, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n\nsagaMiddleware.run(rootSaga);\n\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>\n, document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}