(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(47)},35:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(26),s=a.n(c),i=(a(35),a(14)),o=a(15),l=a(19),h=a(16),u=a(18),p=a(6),d=a(11),f=(a(41),a(43),"REFRESH_CHARTS"),y="REFRESH_CHARTS_OF_TYPE",b="REFRESH_CHARTS_VIA_TYPEMAP",m="DISPATCH_ACTION_AND_REFRESH",E="FETCH_NEW_DATA",v="RETICULATE_SPLINES",T="INITIALIZE_FLUX_CAPACITOR",O=0,j=["Type A","Type B","Type C","Type D","Type E","Type F"],C=function(e,t){return{type:"SET_DATE",payload:{id:e,date:t}}},w=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.chart;return n.a.createElement("div",{className:"chart"},n.a.createElement("div",{className:"field"},"ID"),n.a.createElement("div",{className:"value"},t.id),n.a.createElement("div",{className:"field"},"Name"),n.a.createElement("div",{className:"value"},n.a.createElement("input",{type:"text",onChange:function(a){return e.props.setName(t.id,a.target.value)},value:t.name})),n.a.createElement("div",{className:"field"},"Type"),n.a.createElement("div",{className:"value"},n.a.createElement("input",{type:"text",onChange:function(a){return e.props.setType(t.id,a.target.value)},value:t.type})),n.a.createElement("div",{className:"field"},"Date"),n.a.createElement("div",{className:"value"},n.a.createElement("input",{type:"text",onChange:function(a){return e.props.setDate(t.id,a.target.value)},value:t.date})))}}]),t}(r.PureComponent),k=Object(d.b)(null,{setName:function(e,t){return{type:"SET_NAME",payload:{id:e,name:t}}},setType:function(e,t){return{type:"SET_TYPE",payload:{id:e,type:t}}},setDate:C})(w),A=a(28),_=Object(A.a)([function(e){return e.charts}],function(e){return Object.values(e).sort(function(e,t){return e-t})}),x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).createChart=a.createChart.bind(Object(p.a)(Object(p.a)(a))),a.refreshCharts=a.refreshCharts.bind(Object(p.a)(Object(p.a)(a))),a.refreshTypeACharts=a.refreshTypeACharts.bind(Object(p.a)(Object(p.a)(a))),a.refreshTypeBCharts=a.refreshTypeBCharts.bind(Object(p.a)(Object(p.a)(a))),a.refreshStaleCharts=a.refreshStaleCharts.bind(Object(p.a)(Object(p.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"createChart",value:function(){this.props.createChart()}},{key:"refreshCharts",value:function(){this.props.refreshCharts()}},{key:"refreshTypeACharts",value:function(){this.props.refreshChartsOfType("Type A")}},{key:"refreshTypeBCharts",value:function(){this.props.refreshChartsViaTypeMap("Type B")}},{key:"refreshStaleCharts",value:function(){this.props.dispatchActionAndRefresh({type:"JUNK_ACTION",payload:{name:"junk",type:"useless"}},function(e){return Date.now()-e.date>15e3})}},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"ui"},n.a.createElement("ul",{className:"controls"},n.a.createElement("li",null,n.a.createElement("button",{onClick:this.createChart},"Add chart")),n.a.createElement("li",null,n.a.createElement("button",{onClick:this.refreshCharts},"Refresh charts")),n.a.createElement("li",null,n.a.createElement("button",{onClick:this.refreshTypeACharts},"Refresh Type A charts")),n.a.createElement("li",null,n.a.createElement("button",{onClick:this.refreshTypeBCharts},"Refresh Type B charts, via type map")),n.a.createElement("li",null,n.a.createElement("button",{onClick:this.refreshStaleCharts},"Refresh charts that are 15 seconds old"))),n.a.createElement("ul",{className:"notes"},n.a.createElement("li",null,"Okay. Start off by just clicking the 'Add chart' button a few times. That'll add some dummy \"chart\" widgets, which are just boxes that have a few values. You can change them."),n.a.createElement("li",null,"The simplest case is just the 'Refresh charts' button. Click that, and everything refreshes."),n.a.createElement("li",null,"Next simplest case would be the 'Refresh Type A charts' button. Click that, and only charts of Type A will refresh. Note that chart types are randomly assigned upon creation, and you can edit the type of you don't have an \"Type A\" charts."),n.a.createElement("li",null,"The slightly more complicated flavor is 'Refresh Type B charts, via type map'. This uses another key in the redux store, \"typeMap\". That'll store a mapping from chart type to a list of chart IDs. This way we don't need to do a O(n) lookup across all charts to see if they match, we'll have pre-computed and stored the matching charts. Obviously, this could be extended to use other chart attributes as well."),n.a.createElement("li",null,"The complex case is refreshing 15 second old charts. That one dispatches a different type of action that fires off some arbitrary action (not specifically a REFRESH_CHART* type), and also takes a condition function that operates on each chart in the list and refreshes it if it matches the condition. In this case, if it's more than 15 seconds old."),n.a.createElement("li",null,"Since this is react, there's a ton of boilerplate and irrelevant stuff set up just to make the demo happen. You can really just look at src/sagas/charts.js to see the saga implementation with notes on it. The rest is not documented and not written to OmniSci style guidelines."))),n.a.createElement("div",{className:"charts"},this.props.charts.map(function(e){return n.a.createElement(k,{key:e.id,chart:e})})))}}]),t}(r.Component);x.defaultProps={charts:[]};var N=Object(d.b)(function(e){return{charts:_(e)}},{createChart:function(){return{type:"CREATE_CHART",payload:{id:O++,name:"New chart",type:j[Math.floor(Math.random()*j.length)],date:Date.now()}}},refreshCharts:function(){return{type:f}},refreshChartsOfType:function(e){return{type:y,payload:{chartType:e}}},refreshChartsViaTypeMap:function(e){return{type:b,payload:{chartType:e}}},dispatchActionAndRefresh:function(e,t){return{type:m,payload:{action:e,condition:t}}}})(x);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R=a(8),g=a(29),S=a(17),D=a(7),I={},H=a(22),P={},B=Object(R.c)({charts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_CHART":var a=t.payload;return Object(D.a)({},e,Object(S.a)({},a.id,a));case"DELETE_CHART":var r=t.payload.id,n=Object(D.a)({},e);return delete n[r],n;case"SET_DATE":var c=t.payload,s=c.id,i=c.date,o=Object(D.a)({},e);return o[s]=Object(D.a)({},o[s],{date:i}),o;case"SET_TYPE":var l=t.payload,h=l.id,u=l.type,p=Object(D.a)({},e);return p[h]=Object(D.a)({},p[h],{type:u}),p;case"SET_NAME":var d=t.payload,f=d.id,y=d.name,b=Object(D.a)({},e);return b[f]=Object(D.a)({},b[f],{name:y}),b;case"JUNK_ACTION":return console.log("A junk action was run. Nothing happens."),e;default:return e}},typeMap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_CHART":var a=t.payload,r=Object(D.a)({},e);return r[a.type]=r[a.type]?Object(H.a)(r[a.type]):[],r[a.type].push(a.id),r;case"SET_TYPE":var n=t.payload,c=n.id,s=n.type,i=Object(D.a)({},e);return Object.keys(i).forEach(function(e){-1!==i[e].indexOf(c)&&(i[e]=i[e].filter(function(e){return e!==c}))}),i[s]=i[s]?Object(H.a)(i[s]):[],i[s].push(c),i;default:return e}}}),M=a(5),F=a.n(M),L=a(4),Y=F.a.mark(W),U=F.a.mark(K),V=F.a.mark(Z),X=F.a.mark($),J=F.a.mark(q);function W(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.a)([Object(L.d)(f,K),Object(L.d)(E,K),Object(L.d)(v,K),Object(L.d)(T,K),Object(L.d)(y,Z),Object(L.d)(b,$),Object(L.d)(m,q)]);case 2:case"end":return e.stop()}},Y,this)}function K(e){var t,a,r,n,c;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.c)();case 2:t=e.sent,a=t.charts,r=Object.values(a),n=0;case 6:if(!(n<r.length)){e.next=13;break}return c=r[n],e.next=10,Object(L.b)(C(c.id,Date.now()));case 10:n++,e.next=6;break;case 13:case"end":return e.stop()}},U,this)}function Z(e){var t,a,r,n,c,s;return F.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.chartType,i.next=3,Object(L.c)();case 3:a=i.sent,r=a.charts,n=Object.values(r),c=0;case 7:if(!(c<n.length)){i.next=15;break}if((s=n[c]).type!==t){i.next=12;break}return i.next=12,Object(L.b)(C(s.id,Date.now()));case 12:c++,i.next=7;break;case 15:case"end":return i.stop()}},V,this)}function $(e){var t,a,r,n,c,s,i,o,l,h;return F.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload.chartType,u.next=3,Object(L.c)();case 3:a=u.sent,r=a.typeMap,n=r[t],c=!0,s=!1,i=void 0,u.prev=9,o=n[Symbol.iterator]();case 11:if(c=(l=o.next()).done){u.next=18;break}return h=l.value,u.next=15,Object(L.b)(C(h,Date.now()));case 15:c=!0,u.next=11;break;case 18:u.next=24;break;case 20:u.prev=20,u.t0=u.catch(9),s=!0,i=u.t0;case 24:u.prev=24,u.prev=25,c||null==o.return||o.return();case 27:if(u.prev=27,!s){u.next=30;break}throw i;case 30:return u.finish(27);case 31:return u.finish(24);case 32:case"end":return u.stop()}},X,this,[[9,20,24,32],[25,,27,31]])}function q(e){var t,a,r,n,c,s,i,o;return F.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,a=t.action,r=t.condition,l.next=3,Object(L.b)(a);case 3:return l.next=5,Object(L.c)();case 5:n=l.sent,c=n.charts,s=Object.values(c),i=0;case 9:if(!(i<s.length)){l.next=17;break}if(o=s[i],!r(o)){l.next=14;break}return l.next=14,Object(L.b)(C(o.id,Date.now()));case 14:i++,l.next=9;break;case 17:case"end":return l.stop()}},J,this)}var z=F.a.mark(G);function G(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.a)([W()]);case 2:case"end":return e.stop()}},z,this)}a.d(t,"store",function(){return ee});var Q=Object(g.a)(),ee=Object(R.a)(Q)(R.e)(B,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Q.run(G),s.a.render(n.a.createElement(d.a,{store:ee},n.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,2,1]]]);
//# sourceMappingURL=main.8f3d0737.chunk.js.map